var S=i=>{throw TypeError(i)};var P=(i,t,e)=>t.has(i)||S("Cannot "+e);var a=(i,t,e)=>(P(i,t,"read from private field"),e?e.call(i):t.get(i)),p=(i,t,e)=>t.has(i)?S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),v=(i,t,e,r)=>(P(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();var d;class L{constructor(){p(this,d);v(this,d,[[],[],[],[],[]]),this.gameOn=!1,this.gameOver=!1,this.movingPlayer="X",this.singlePlayer=!0,this.xPieces=4,this.OPieces=4,this.gridStartX=1,this.gridStartY=1,this.moveMade=!1}get board(){return a(this,d)}toggleGameMode(){this.singlePlayer=!this.singlePlayer}makeAMove(t,e){a(this,d)[t][e]===void 0&&this.isInGrid(t,e)&&(this.movingPlayer==="X"&&this.xPieces>0||this.movingPlayer==="O"&&this.OPieces>0)?(a(this,d)[t][e]=this.movingPlayer,this.movingPlayer==="X"?this.xPieces=this.xPieces-1:this.OPieces=this.OPieces-1,this.switchPlayer()):this.showMoveError()}removePiece(t,e){a(this,d)[t][e]=void 0,this.movingPlayer==="X"?this.xPieces++:this.OPieces++}isInGrid(t,e){return t>=this.gridStartX&&t<this.gridStartX+3&&e>=this.gridStartY&&e<this.gridStartY+3}moveLeft(){this.gridStartY>0&&this.xPieces<=2&&this.OPieces<=2?(this.gridStartY--,this.switchPlayer()):this.showMoveError()}moveRight(){this.gridStartY+3<5&&this.xPieces<=2&&this.OPieces<=2?(this.gridStartY++,this.switchPlayer()):this.showMoveError()}moveUp(){this.gridStartX>0&&this.xPieces<=2&&this.OPieces<=2?(this.gridStartX--,this.switchPlayer()):this.showMoveError()}moveDown(){this.gridStartX+3<5&&this.xPieces<=2&&this.OPieces<=2?(this.gridStartX++,this.switchPlayer()):this.showMoveError()}showMoveError(){alert("You cant move there lil bro.")}switchPlayer(){this.movingPlayer=this.movingPlayer==="X"?"O":"X",this.moveMade=!0}checkWin(){const t=e=>{for(let r=this.gridStartX;r<this.gridStartX+3;r++)if(a(this,d)[r][this.gridStartY]===e&&a(this,d)[r][this.gridStartY+1]===e&&a(this,d)[r][this.gridStartY+2]===e)return!0;for(let r=this.gridStartY;r<this.gridStartY+3;r++)if(a(this,d)[this.gridStartX][r]===e&&a(this,d)[this.gridStartX+1][r]===e&&a(this,d)[this.gridStartX+2][r]===e)return!0;return a(this,d)[this.gridStartX][this.gridStartY]===e&&a(this,d)[this.gridStartX+1][this.gridStartY+1]===e&&a(this,d)[this.gridStartX+2][this.gridStartY+2]===e||a(this,d)[this.gridStartX][this.gridStartY+2]===e&&a(this,d)[this.gridStartX+1][this.gridStartY+1]===e&&a(this,d)[this.gridStartX+2][this.gridStartY]===e};return t("X")?(this.gameOver=!0,"X"):t("O")?(this.gameOver=!0,"O"):null}makeAIMove(){let t=this.getRandomInRange(this.gridStartX,this.gridStartX+2),e=this.getRandomInRange(this.gridStartY,this.gridStartY+2),r=this.getRandomInRange(0,3),n=["down","up","left","right"][r];if(!this.gameOver)if(this.OPieces>0)a(this,d)[this.gridStartX+1][this.gridStartY+1]===void 0?(a(this,d)[this.gridStartX+1][this.gridStartY+1]="O",this.OPieces--):a(this,d)[this.gridStartX][this.gridStartY]===void 0?(a(this,d)[this.gridStartX][this.gridStartY]="O",this.OPieces--):a(this,d)[this.gridStartX+2][this.gridStartY]===void 0?(a(this,d)[this.gridStartX+2][this.gridStartY]="O",this.OPieces--):a(this,d)[this.gridStartX+2][this.gridStartY+2]===void 0?(a(this,d)[this.gridStartX+2][this.gridStartY+2]="O",this.OPieces--):a(this,d)[t][e]===void 0&&(a(this,d)[t][e]="O",this.OPieces--),this.switchPlayer();else if(this.xPieces<=2&&this.OPieces<=2)if(n==="up"&&this.gridStartX>0)this.moveUp();else if(n==="down"&&this.gridStartX+3<5)this.moveDown();else if(n==="right"&&this.gridStartY+3<5)this.moveRight();else if(n==="left"&&this.gridStartY>0)this.moveLeft();else return;else if(a(this,d)[t][e]==="O")this.removePiece(t,e),t=this.getRandomInRange(this.gridStartX,this.gridStartX+2),e=this.getRandomInRange(this.gridStartY,this.gridStartY+2),a(this,d)[t][e]===void 0&&(a(this,d)[t][e]="O",this.switchPlayer());else return}getRandomInRange(t,e){return Math.floor(Math.random()*(e-t)+t)}resetGame(){v(this,d,[[],[],[],[],[]]),this.gameOn=!1,this.gameOver=!1,this.movingPlayer="X",this.xPieces=4,this.OPieces=4,this.gridStartX=1,this.gridStartY=1,this.moveMade=!1}}d=new WeakMap;function X(){let i=document.createElement("h1");return i.innerHTML="Tic Tac Two",i.id="title",i.classList.add("row"),i}function b(i,t,e){let r=document.createElement("div");r.classList.add("board"),r.id="board";let s=document.createElement("div");s.classList.add("row","info"),s.innerHTML=`moving: ${i.movingPlayer} &nbsp;&nbsp;|&nbsp;&nbsp; X pieces: ${i.xPieces} &nbsp;&nbsp;|&nbsp;&nbsp; O pieces: ${i.OPieces}`,r.appendChild(s);for(let n=0;n<5;n++){let l=document.createElement("div");l.classList.add("row");for(let c=0;c<5;c++){let g=document.createElement("div");g.classList.add("col"),i.isInGrid(n,c)&&g.classList.add("grid-sq"),g.addEventListener("click",m=>{e(n,c,m)}),g.innerHTML=t[n][c]||" ",l.appendChild(g)}r.appendChild(l)}return r}function w(i){let t=document.createElement("div");t.classList.add("row");let e=document.createElement("div");e.classList.add("small-btn","m-3"),e.innerHTML="&#8592;",e.addEventListener("click",()=>{i.moveLeft(),h(),u()}),t.appendChild(e);let r=document.createElement("div");r.classList.add("small-btn","m-3"),r.innerHTML="&#8594;",r.addEventListener("click",()=>{i.moveRight(),h(),u()}),t.appendChild(r);let s=document.createElement("div");s.classList.add("small-btn","m-3"),s.innerHTML="&#8593;",s.addEventListener("click",()=>{i.moveUp(),h(),u()}),t.appendChild(s);let n=document.createElement("div");return n.classList.add("small-btn","m-3"),n.innerHTML="&#8595;",n.addEventListener("click",()=>{i.moveDown(),h(),u()}),t.appendChild(n),t}function Y(i){let t=document.createElement("div");t.classList.add("row");let e=document.createElement("div");e.classList.add("small-btn","big-btn","m-3");const r=()=>{e.innerHTML=i.singlePlayer===!1?"multiplayer":"single player",e.style.backgroundColor=i.singlePlayer===!1?"#3498db":"#2ecc71"};r(),e.addEventListener("click",()=>{i.toggleGameMode(),r(),h()}),t.appendChild(e);let s=5;const n=document.createElement("div");n.classList.add("small-btn","timer"),t.appendChild(n),n.textContent=s.toString();let l;function c(){l&&clearInterval(l),l=setInterval(()=>{s--,n.textContent=s.toString(),i.moveMade?(s=5,i.moveMade=!1,n.textContent=s.toString()):s===0&&(alert("you didnt move, sleepy! switching players"),i.switchPlayer(),h(),s=5,n.textContent=s.toString(),u()),i.gameOver&&(clearInterval(l),l=void 0)},1e3)}function g(){l&&(clearInterval(l),l=void 0),s=5,n.textContent=s.toString()}let m=document.createElement("div");m.classList.add("small-btn","big-btn","m-3"),m.innerHTML="press to start timer";let f=document.createElement("div");return f.classList.add("small-btn","big-btn","m-3"),f.style.backgroundColor="#e74c3c",f.innerHTML="reset",m.addEventListener("click",()=>{i.gameOn||(i.gameOn=!0,i.gameOver=!1,c(),h())}),f.addEventListener("click",()=>{i.resetGame(),g(),h()}),t.appendChild(m),t.appendChild(f),t}let o=new L;console.log("hi");let M=X();document.body.appendChild(M);let y=Y(o);document.body.appendChild(y);let E=w(o);document.body.appendChild(E);let C=b(o,o.board,O);document.body.appendChild(C);function h(){let i=document.getElementById("board");if(i){let t=b(o,o.board,O);i.replaceWith(t)}}function O(i,t,e){o.board[i][t]===void 0?(o.makeAMove(i,t),e.target.innerHTML=o.board[i][t]||"&nbsp;"):o.board[i][t]===o.movingPlayer?o.removePiece(i,t):o.showMoveError(),u();let r=o.checkWin();r&&o.singlePlayer===!1&&setTimeout(()=>{alert(`Game over! ${r} wins!`),console.log(r)},100),h()}function u(){o.singlePlayer===!0&&o.movingPlayer==="O"&&!o.gameOver&&setTimeout(()=>{o.makeAIMove();let i=o.checkWin();i&&setTimeout(()=>{alert(`Game over! ${i} wins!`),console.log(i)},100),h()},1e3)}
